<div class="body">
  <nav id="sidebar" #sidebar>
    <ul>
      <li>
        <span class="logo">SEIS</span>
        <button (click)="toggleSidebar()" id="toggle-btn" #toggleBtn>
          <svg class="svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
            fill="#e8eaed">
            <path
              d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z" />
          </svg>
        </button>
      </li>
      @for (item of menus; track $index) {
      @if (item.subMenus?.length == 0 || !item.subMenus) {
      <li>
        <button class="dropdown-btn">
          <mat-icon class="svg" aria-hidden="false" aria-label="icon">{{item.icono}}</mat-icon>
          <span>{{item.nombre}}</span>
        </button>
      </li>
      } @else {
      <li>
        <button (click)="toggleSubMenu($event)" class="dropdown-btn">
          <!-- -->
          <mat-icon class="svg" aria-hidden="false" aria-label="icon">{{item.icono}}</mat-icon>
          <span>{{item.nombre}}</span>
          <svg class="svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
            fill="#e8eaed">
            <path
              d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z" />
          </svg>
        </button>
        <ul class="sub-menu">
          <div>
            @for (subItem of item.subMenus; track $index)
            {
            <li (click)="testingSession(subItem.ruta!)"><a>{{subItem.nombre}}</a></li>
            }
          </div>
        </ul>
      </li>
      }
      }
      <li class="user-profile">
        <div class="user-info">
          <div class="user-avatar">
            <img [src]="usuario?.base64Img || 'assets/default-avatar.png'" alt="Avatar">
          </div>
          <div class="user-details">
            <span class="user-name">{{usuario?.nombre || 'Usuario'}}</span>
            <span class="user-email">{{usuario?.correo || 'email@ejemplo.com'}}</span>
          </div>
        </div>
        <button class="logout-btn" [matMenuTriggerFor]="menu" title="Cerrar sesión">
          <mat-icon aria-hidden="false" aria-label="more_vert icon">more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu" xPosition="before" yPosition="above">
          <button mat-menu-item (click)="goTo('pages/view-profile')">
            <mat-icon>account_circle</mat-icon>
            <span>Perfil</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Cerrar sesión</span>
          </button>
        </mat-menu>
        <!-- <button class="logout-btn-img" (click)="logout()" title="Cerrar sesión">
          <img [src]="usuario?.base64Img || 'assets/default-avatar.png'" alt="Avatar">
        </button> -->
      </li>
      <!-- <li class="active">
        <a href="index.html">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed">
            <path
              d="M240-200h120v-200q0-17 11.5-28.5T400-440h160q17 0 28.5 11.5T600-400v200h120v-360L480-740 240-560v360Zm-80 0v-360q0-19 8.5-36t23.5-28l240-180q21-16 48-16t48 16l240 180q15 11 23.5 28t8.5 36v360q0 33-23.5 56.5T720-120H560q-17 0-28.5-11.5T520-160v-200h-80v200q0 17-11.5 28.5T400-120H240q-33 0-56.5-23.5T160-200Zm320-270Z" />
          </svg>
          <span>Home</span>
        </a>
      </li> -->
    </ul>
  </nav>
  <app-navbar></app-navbar>
  <main>
    <router-outlet></router-outlet>
  </main>
</div>